#
# This file is managed by Chef.
# Do NOT modify this file directly.

<% solr_home = node.solrcloud.solr_home % { install_dir: node.solrcloud.install_dir } -%>
JAVA_OPTIONS="-Dsolr.solr.home=<%= solr_home %>
-Dsolr.data.dir=<%= node.solrcloud.data_dir %>
<% if node.solrcloud.zk_run -%>
-DzkRun
<% end -%>
<% if node.solrcloud.hdfs.enable and node.solrcloud.hdfs.hdfs_home -%>
-Dsolr.directoryFactory=<%= node.solrcloud.hdfs.directory_factory %>
-Dsolr.lock.type=<%= node.solrcloud.hdfs.lock_type %>
-Dsolr.hdfs.home=<%= node.solrcloud.hdfs.hdfs_home %>
<% end -%>
<% if node.solrcloud.enable_jmx -%>
-Dcom.sun.management.jmxremote
-Dcom.sun.management.jmxremote.local.only=false
-Dcom.sun.management.jmxremote.port=<%= node.solrcloud.jmx.port %>
-Dcom.sun.management.jmxremote.ssl=false
-Dcom.sun.management.jmxremote.authenticate=<%= node.solrcloud.jmx.authenticate %>
<% password_file = node.solrcloud.jmx.password_file % { install_dir: node.solrcloud.install_dir } -%>
-Dcom.sun.management.jmxremote.password.file=<%= password_file %>
<% access_file = node.solrcloud.jmx.access_file % { install_dir: node.solrcloud.install_dir } -%>
-Dcom.sun.management.jmxremote.access.file=<%= access_file %>
-Djava.rmi.server.hostname=<%= node.ipaddress %>
<% end -%>
<% if node.solrcloud.java_options.find { |jo| jo.match /Xmx\d+/ }.nil? -%>
-Xmx<%= @java_xmx %>
<% end -%>
<% if node.solrcloud.java_options.find { |jo| jo.match /Xms\d+/ }.nil? -%>
-Xms<%= @java_xms %>
<% end -%>
<%= node.solrcloud.java_options.join(" \n") -%>
$JAVA_OPTIONS"

JETTY_HOME=<%=node.solrcloud.install_dir%>
JETTY_USER=<%=node.solrcloud.user%>
JETTY_LOGS=<%=node.solrcloud.log_dir%>
JETTY_RUN=<%=node.solrcloud.pid_dir%>
JETTY_PORT=<%=node.solrcloud.port%>
JETTY_SSL_PORT=<%=node.solrcloud.ssl_port%>
JETTY_SSL_CLIENT_AUTH=<%=node.solrcloud.jetty_config.ssl_connector.need_client_auth%>
#JETTY_ARGS=

